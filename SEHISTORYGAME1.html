<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø®ØªØ¨Ø± ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„ØªØ±Ø¨ÙˆÙŠØ© - ENS</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #c0392b; /* Ø£Ø­Ù…Ø± Ø¯Ø§ÙƒÙ† Ù„Ù„Ø¬Ø¯ÙŠØ© ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„ */
            --secondary: #2c3e50;
            --accent: #e74c3c;
            --success: #27ae60;
            --error: #922b21;
            --bg: #fdedec;
            --card: #ffffff;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--secondary);
            padding: 20px;
        }

        .container {
            background: var(--card);
            width: 100%;
            max-width: 800px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
            min-height: 750px;
            display: flex;
            flex-direction: column;
            border: 1px solid #fadbd8;
        }

        /* Header */
        .header {
            background: var(--primary);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .badge {
            background: rgba(0,0,0,0.2);
            padding: 5px 15px;
            border-radius: 20px;
        }

        .back-button {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(255,255,255,0.3);
            transform: translateX(-3px);
        }

        /* Progress */
        .progress-bar {
            height: 8px;
            background: #eee;
            width: 100%;
        }
        .progress-fill {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Screens */
        .screen {
            flex: 1;
            padding: 30px;
            text-align: center;
            display: none;
            flex-direction: column;
            justify-content: center;
            animation: fadeIn 0.4s ease;
        }
        
        .screen.active { display: flex; }

        h1 { margin: 0 0 10px 0; color: var(--primary); font-size: 2rem; }

        /* Text Card */
        .text-card {
            background: #fdfefe;
            border: 2px solid #eaecee;
            padding: 20px;
            text-align: right;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.03);
            max-height: 250px;
            overflow-y: auto;
            line-height: 1.8;
            font-size: 1.05rem;
            color: #34495e;
            position: relative;
        }

        .text-card::-webkit-scrollbar { width: 8px; }
        .text-card::-webkit-scrollbar-thumb { background: #d5d8dc; border-radius: 4px; }

        .scenario-counter {
            font-size: 0.9rem;
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 5px;
            text-align: right;
            display: block;
        }

        .step-label {
            display: inline-block;
            background: var(--secondary);
            color: white;
            padding: 10px 30px;
            border-radius: 50px;
            margin-bottom: 20px;
            font-weight: bold;
            font-size: 1rem;
            box-shadow: 0 4px 10px rgba(44, 62, 80, 0.2);
        }

        /* Grid */
        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
        }

        .option-btn {
            background: white;
            border: 2px solid #ecf0f1;
            padding: 16px;
            border-radius: 12px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Tajawal', sans-serif;
            color: var(--secondary);
            font-weight: 500;
        }

        .option-btn:hover:not([disabled]) {
            border-color: var(--primary);
            background: #f9e79f;
            transform: translateX(5px);
        }

        .option-btn.correct {
            background: #d5f5e3;
            border-color: var(--success);
            color: var(--success);
            font-weight: bold;
        }

        .option-btn.wrong {
            background: #fadbd8;
            border-color: var(--error);
            color: var(--error);
        }

        /* Controls */
        .next-btn {
            margin-top: 25px;
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 60px;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            display: none;
            align-self: center;
        }
        .next-btn:hover { background: #922b21; }

        .start-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 15px 50px;
            border-radius: 50px;
            font-size: 1.4rem;
            cursor: pointer;
            font-weight: bold;
            margin-top: 30px;
        }

        .feedback {
            margin-top: 15px;
            font-weight: bold;
            min-height: 25px;
            font-size: 1.1rem;
        }

        .final-score {
            font-size: 4rem;
            color: var(--primary);
            font-weight: 800;
            margin: 20px 0;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <button class="back-button" onclick="window.location.href='SEHISTORYCOURE.html'">
            â† Ø±Ø¬ÙˆØ¹
        </button>
        <div id="section-title">Ù…Ø®ØªØ¨Ø± ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ØµÙˆØµ</div>
        <div class="badge">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>

    <div class="screen active" id="screen-intro">
        <h1>ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ÙŠØ§Øª Ø§Ù„ØªØ±Ø¨ÙˆÙŠØ© ğŸ“œ</h1>
        <p style="font-size:1.1rem; color:#555;">Ù‡Ù„ ØªÙ…Ù„Ùƒ Ø¹ÙŠÙ† "Ø§Ù„Ù…ÙØªØ´ Ø§Ù„ØªØ±Ø¨ÙˆÙŠ"ØŸ</p>
        <div style="background:#fff; padding:20px; border-radius:15px; margin:20px 0; border:1px solid #eee; text-align:right;">
            <p>1ï¸âƒ£ <strong>Ø§Ù„ØªØ­Ø¯ÙŠ:</strong> Ø³Ø£Ø¹Ø±Ø¶ Ø¹Ù„ÙŠÙƒ 10 Ù†ØµÙˆØµ (ÙˆØ¶Ø¹ÙŠØ§Øª) Ù…ØªÙØ§ÙˆØªØ© Ø§Ù„ØµØ¹ÙˆØ¨Ø©.</p>
            <p>2ï¸âƒ£ <strong>Ø§Ù„ØªØ­Ù„ÙŠÙ„:</strong> Ù„ÙƒÙ„ Ù†ØµØŒ ÙŠØ¬Ø¨ Ø£Ù† ØªØ³ØªØ®Ø±Ø¬ 5 Ø¹Ù†Ø§ØµØ± Ø¨Ø¯Ù‚Ø©:</p>
            <ul style="list-style-type: none; padding-right: 10px; color: #777;">
                <li>â€¢ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©</li>
                <li>â€¢ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„Ø©</li>
                <li>â€¢ Ù‡Ø¯Ù Ø§Ù„ØªØ±Ø¨ÙŠØ©</li>
                <li>â€¢ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…ÙˆØ¬Ù‡Ø©</li>
                <li>â€¢ Ù…ÙƒØ§Ù†Ø© Ø§Ù„Ù…ØªØ¹Ù„Ù…</li>
            </ul>
        </div>
        <button class="start-btn" onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù„ÙŠÙ„</button>
    </div>

    <div class="screen" id="screen-game">
        <span class="scenario-counter" id="s-counter">Ù†Øµ 1 / 10</span>
        <div class="text-card" id="s-text">
            ...
        </div>

        <div class="step-label" id="s-step-label">...</div>
        
        <div class="options-grid" id="s-options"></div>
        <div class="feedback" id="s-feedback"></div>
        <button class="next-btn" id="s-next-btn" onclick="nextGameStep()">ØªØ§Ø¨Ø¹ Ø§Ù„ØªØ­Ù„ÙŠÙ„</button>
    </div>

    <div class="screen" id="screen-result">
        <h1>ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</h1>
        <div class="final-score" id="final-score">0</div>
        <p id="final-msg" style="font-size:1.3rem;">...</p>
        <button class="start-btn" style="background:var(--secondary)" onclick="location.reload()">ØªØ­Ù„ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
    </div>
          <script>
    /* ================= DATA: 10 Scenarios (Texts) ================= */
    const scenarios = [
        {
            id: 1,
            text: "ÙÙŠ ØµØ¨Ø§Ø­ ÙŠÙˆÙ… Ù…Ø´Ù…Ø³ØŒ ÙŠØ®Ø±Ø¬ Ø£Ø·ÙØ§Ù„ Ø§Ù„Ù‚Ø¨ÙŠÙ„Ø© Ù…Ø¹ ÙƒØ¨Ø§Ø± Ø§Ù„Ø³Ù† Ø¥Ù„Ù‰ Ø§Ù„ØºØ§Ø¨Ø©. ÙŠØ±Ø§Ù‚Ø¨ Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø¨ØµÙ…Øª ÙƒÙŠÙ ÙŠÙ‚ÙˆÙ… Ø§Ù„ÙƒØ¨Ø§Ø± Ø¨Ù†Ø­Øª Ø±Ø¤ÙˆØ³ Ø§Ù„Ø±Ù…Ø§Ø­ ÙˆØªØªØ¨Ø¹ Ø¢Ø«Ø§Ø± Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª. Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ ÙˆÙ„Ø§ Ø¬Ø¯Ø±Ø§Ù†ØŒ ÙÙ‚Ø· Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© ÙˆØ§Ù„Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©. Ø¥Ø°Ø§ Ù†Ø¬Ø­ Ø§Ù„Ø·ÙÙ„ ÙÙŠ Ø§Ù„ØµÙŠØ¯ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©ØŒ ØªÙ‚Ø§Ù… Ø·Ù‚ÙˆØ³ Ø§Ø­ØªÙØ§Ù„ÙŠØ© ØªØ¹Ù„Ù† Ø§Ù†ØªÙ‚Ø§Ù„Ù‡ Ù„Ø¹Ø§Ù„Ù… Ø§Ù„ÙƒØ¨Ø§Ø±.",
            era: "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ø§Ø¦ÙŠØ©",
            authority: "Ø§Ù„Ø£Ø³Ø±Ø© ÙˆØ§Ù„Ù‚Ø¨ÙŠÙ„Ø©",
            goal: "Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ù‚Ø§Ø¡ ÙˆØªÙ„Ø¨ÙŠØ© Ø§Ù„Ø­Ø§Ø¬Ø§Øª Ø§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©",
            values: "Ø§Ù„ØªØ¶Ø§Ù…Ù†ØŒ Ø§Ù„Ù‚ÙˆØ©ØŒ ÙˆØ§Ù„Ø®Ø¶ÙˆØ¹ Ù„ØªÙ‚Ø§Ù„ÙŠØ¯ Ø§Ù„Ø¬Ù…Ø§Ø¹Ø©",
            learner: "Ù…Ù‚Ù„Ø¯ Ø³Ù„Ø¨ÙŠ ÙŠØªØ¹Ù„Ù… Ø¨Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø¹ÙÙˆÙŠØ©"
        },
        {
            id: 2,
            text: "ÙŠÙÙ†ØªØ²Ø¹ Ø§Ù„Ø£Ø·ÙØ§Ù„ Ù…Ù† Ø£Ù…Ù‡Ø§ØªÙ‡Ù… ÙÙŠ Ø³Ù† Ø§Ù„Ø³Ø§Ø¨Ø¹Ø© Ù„ÙŠÙˆØ¶Ø¹ÙˆØ§ ÙÙŠ Ù…Ø¹Ø³ÙƒØ±Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨. ÙŠÙ†Ø§Ù…ÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¶ Ø§Ù„ØµÙ„Ø¨Ø©ØŒ ÙˆÙŠÙØ¶Ø±Ø¨ÙˆÙ† Ù„ØªØ¹Ù„Ù… Ø§Ù„ØµØ¨Ø±ØŒ ÙˆÙŠØªØ¯Ø±Ø¨ÙˆÙ† Ù„Ø³Ø§Ø¹Ø§Øª Ø·ÙˆÙŠÙ„Ø© Ø¹Ù„Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø³ÙŠÙ ÙˆØ§Ù„Ø±Ù…Ø­. Ù„Ø§ Ù…ÙƒØ§Ù† Ù„Ù„Ø¶Ø¹ÙØ§Ø¡ Ù‡Ù†Ø§Ø› Ø§Ù„Ø¯ÙˆÙ„Ø© ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¬Ù†ÙˆØ¯ Ø£Ù‚ÙˆÙŠØ§Ø¡ Ù„Ù„Ø¯ÙØ§Ø¹ Ø¹Ù† Ø£Ø³ÙˆØ§Ø± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ ÙˆØ§Ù„ÙØ±Ø¯ Ù„Ø§ Ù‚ÙŠÙ…Ø© Ù„Ù‡ Ø¥Ù„Ø§ Ø¨Ù‚Ø¯Ø± Ø®Ø¯Ù…ØªÙ‡ Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹.",
            era: "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ÙŠÙˆÙ†Ø§Ù†ÙŠØ© (Ø¥Ø³Ø¨Ø±Ø·Ø©)",
            authority: "Ø§Ù„Ø¯ÙˆÙ„Ø© (Ø§Ù„Ø­Ø§ÙƒÙ… Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠ)",
            goal: "Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø­Ø§Ø±Ø¨ Ø§Ù„Ù…ÙˆØ§Ø·Ù† Ø§Ù„Ù…Ø¯Ø§ÙØ¹ Ø¹Ù† Ø§Ù„Ø¯ÙˆÙ„Ø©",
            values: "Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø¬Ø³Ø¯ÙŠØ©ØŒ Ø§Ù„Ø·Ø§Ø¹Ø© Ø§Ù„Ø¹Ù…ÙŠØ§Ø¡ØŒ ÙˆØ§Ù„Ø´Ø¬Ø§Ø¹Ø©",
            learner: "Ø¬Ù†Ø¯ÙŠ ÙÙŠ Ø·ÙˆØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ (Ø®Ø§Ø¶Ø¹ Ù„Ù„Ø£ÙˆØ§Ù…Ø±)"
        },
        {
            id: 3,
            text: "ÙŠØ¬Ù„Ø³ Ø§Ù„Ø·Ù„Ø§Ø¨ ÙÙŠ Ø­Ù„Ù‚Ø§Øª Ø¯Ø§Ø¦Ø±ÙŠØ© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø³Ø¬Ø¯ØŒ ÙŠØ³ØªÙ…Ø¹ÙˆÙ† Ù„Ù„Ø´ÙŠØ® ÙˆÙ‡Ùˆ ÙŠÙØ³Ø± Ø§Ù„Ø¢ÙŠØ§Øª. Ø§Ù„Ù†Ù‚Ø§Ø´ Ù…ÙØªÙˆØ­ØŒ ÙˆØ§Ù„Ø´ÙŠØ® ÙŠÙˆØµÙŠ Ø·Ù„Ø§Ø¨Ù‡ Ø¨Ø§Ù„Ø±ÙÙ‚ ÙˆØ¹Ø¯Ù… Ø§Ù„Ø´Ø¯Ø©. Ø§Ù„Ø¹Ù„Ù… Ù‡Ù†Ø§ ÙˆØ³ÙŠÙ„Ø© Ù„Ù„ØªÙ‚Ø±Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù„Ù‡ØŒ ÙˆÙ„ÙƒÙ†Ù‡ Ø£ÙŠØ¶Ø§Ù‹ ÙŠØ´Ù…Ù„ Ø§Ù„Ø·Ø¨ ÙˆØ§Ù„ÙÙ„Ùƒ. Ø§Ù„Ø·Ø§Ù„Ø¨ ÙŠØ®ØªØ§Ø± Ø­Ù„Ù‚ØªÙ‡ Ø¨Ø­Ø±ÙŠØ©ØŒ ÙˆØ§Ù„Ù‡Ø¯Ù Ù‡Ùˆ ØªÙƒÙˆÙŠÙ† Ø¥Ù†Ø³Ø§Ù† Ù…ØªÙˆØ§Ø²Ù† ÙŠØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø¯ÙŠÙ† ÙˆØ§Ù„Ø¯Ù†ÙŠØ§.",
            era: "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© (Ø§Ù„Ø¹ØµØ± Ø§Ù„Ø°Ù‡Ø¨ÙŠ)",
            authority: "Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø¯ÙŠÙ†ÙŠØ© (Ø§Ù„ÙˆÙ‚Ù/Ø§Ù„Ø¹Ù„Ù…Ø§Ø¡)",
            goal: "Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ø§Ù„ØµØ§Ù„Ø­ (Ø³Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¯Ø§Ø±ÙŠÙ†)",
            values: "Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø¯ÙŠÙ†ÙŠØ©ØŒ Ø§Ù„ØªÙˆØ§Ø¶Ø¹ØŒ ÙˆØ·Ù„Ø¨ Ø§Ù„Ø¹Ù„Ù… ÙØ±ÙŠØ¶Ø©",
            learner: "Ø·Ø§Ù„Ø¨ Ø¹Ù„Ù… Ù…Ø­ØªØ±Ù… Ù„Ù‡ Ø­Ø±ÙŠØ© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±"
        },
        {
            id: 4,
            text: "Ø¯Ø§Ø®Ù„ Ù‚Ø§Ø¹Ø§Øª Ø¨Ø§Ø±Ø¯Ø© ÙˆÙ…Ø¸Ù„Ù…Ø©ØŒ ÙŠØ±ØªÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨ Ù†ØµÙˆØµØ§Ù‹ Ø¨Ø§Ù„Ù„Ø§ØªÙŠÙ†ÙŠØ© Ù„Ø§ ÙŠÙÙ‡Ù…ÙˆÙ† Ù…Ø¹Ù†Ø§Ù‡Ø§ ØºØ§Ù„Ø¨Ø§Ù‹. Ø§Ù„Ø¹ØµØ§ Ù‡ÙŠ Ø§Ù„ÙˆØ³ÙŠÙ„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ø¶Ø¨Ø· Ø§Ù„Ù†Ø¸Ø§Ù…. Ø§Ù„Ù…Ø¹Ù„Ù… ÙŠÙ…Ø«Ù„ Ø§Ù„Ø³Ù„Ø·Ø© Ø§Ù„Ù…Ø·Ù„Ù‚Ø©ØŒ ÙˆØ§Ù„Ù…Ø¹Ø±ÙØ© Ù‡ÙŠ Ø­Ù‚ÙŠÙ‚Ø© Ø«Ø§Ø¨ØªØ© Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…Ù‚Ø¯Ø³Ø© ÙˆØªÙØ³ÙŠØ±Ø§Øª Ø§Ù„Ø¢Ø¨Ø§Ø¡ØŒ ÙˆÙ„Ø§ Ù…Ø¬Ø§Ù„ Ù„Ù„Ù†Ù‚Ø§Ø´ Ø£Ùˆ Ø¥Ø¹Ù…Ø§Ù„ Ø§Ù„Ø¹Ù‚Ù„ Ø§Ù„Ù†Ù‚Ø¯ÙŠ. Ø§Ù„Ø¬Ø³Ø¯ ÙŠØ¹ØªØ¨Ø± Ù…ØµØ¯Ø±Ø§Ù‹ Ù„Ù„Ø®Ø·ÙŠØ¦Ø© ÙŠØ¬Ø¨ Ù‚Ù…Ø¹Ù‡.",
            era: "Ø§Ù„ØªØ±Ø¨ÙŠØ© ÙÙŠ Ø§Ù„Ø¹ØµÙˆØ± Ø§Ù„ÙˆØ³Ø·Ù‰ (Ø£ÙˆØ±ÙˆØ¨Ø§)",
            authority: "Ø§Ù„ÙƒÙ†ÙŠØ³Ø© (Ø±Ø¬Ø§Ù„ Ø§Ù„Ø¯ÙŠÙ†)",
            goal: "Ø§Ù„Ø®Ù„Ø§Øµ Ø§Ù„Ø±ÙˆØ­ÙŠ ÙˆÙ‚Ù…Ø¹ Ø§Ù„Ø¬Ø³Ø¯",
            values: "Ø§Ù„Ø·Ø§Ø¹Ø©ØŒ Ø§Ù„Ø²Ù‡Ø¯ØŒ ÙˆØ§Ù„Ø§Ù…ØªØ«Ø§Ù„ Ù„Ù„Ø¹Ù‚ÙŠØ¯Ø©",
            learner: "Ù…ØªÙ„Ù‚ÙŠ Ø³Ù„Ø¨ÙŠ Ø®Ø§Ø¶Ø¹ Ù„Ù„Ø¹Ù‚Ø§Ø¨ Ø§Ù„Ø¨Ø¯Ù†ÙŠ"
        },
        {
            id: 5,
            text: "ÙŠØ±Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙÙƒØ± Ø£Ù† Ø¹Ù‚Ù„ Ø§Ù„Ø·ÙÙ„ ÙŠÙˆÙ„Ø¯ ÙƒØµÙØ­Ø© Ø¨ÙŠØ¶Ø§Ø¡ Ø®Ø§Ù„ÙŠØ© Ù…Ù† Ø£ÙŠ Ø£ÙÙƒØ§Ø±. Ù„Ø°Ù„ÙƒØŒ ÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ø¨ÙŠ Ø£Ù† ÙŠØ®ØªØ§Ø± Ø¨Ø¹Ù†Ø§ÙŠØ© Ø§Ù„ØªØ¬Ø±Ø¨Ø© ÙˆØ§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„ØªÙŠ ÙŠØªØ¹Ø±Ø¶ Ù„Ù‡Ø§ Ø§Ù„Ø·ÙÙ„ØŒ Ù„Ø£Ù† Ø§Ù„Ø­ÙˆØ§Ø³ Ù‡ÙŠ Ø§Ù„Ù…Ø¯Ø®Ù„ Ø§Ù„ÙˆØ­ÙŠØ¯ Ù„Ù„Ù…Ø¹Ø±ÙØ©. Ø§Ù„ØªØ±Ø¨ÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…ÙÙŠØ¯Ø© ÙˆØªÙ‡Ø¯Ù Ù„Ø¥Ø¹Ø¯Ø§Ø¯ 'Ø±Ø¬Ù„ Ù†Ø¨ÙŠÙ„' (Gentleman) Ù‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ Ø¥Ø¯Ø§Ø±Ø© Ø´Ø¤ÙˆÙ†Ù‡ Ø¨Ø¹Ù‚Ù„Ø§Ù†ÙŠØ©.",
            era: "Ø¹ØµØ± Ø§Ù„Ù†Ù‡Ø¶Ø©/Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© (Ø¬ÙˆÙ† Ù„ÙˆÙƒ)",
            authority: "Ø§Ù„Ù…Ø±Ø¨ÙŠ Ø§Ù„Ø®Ø§Øµ (Ø§Ù„ÙˆØµÙŠ)",
            goal: "ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¹Ù‚Ù„ ÙˆØªÙ†Ù…ÙŠØ© Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ",
            values: "Ø§Ù„Ø¹Ù‚Ù„Ø§Ù†ÙŠØ©ØŒ Ø§Ù„ØªØ¬Ø±Ø¨Ø©ØŒ ÙˆØ§Ù„Ù…Ù†ÙØ¹Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©",
            learner: "Ø¹Ù‚Ù„ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ´ÙƒÙŠÙ„ Ø¹Ø¨Ø± Ø§Ù„Ø­ÙˆØ§Ø³ ÙˆØ§Ù„ØªØ¬Ø±Ø¨Ø©"
        },
        {
            id: 6,
            text: "ÙŠØ¬Ø¨ Ø¥Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ø·ÙÙ„ Ø¹Ù† ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„ÙØ§Ø³Ø¯Ø©. Ù„Ø§ ÙƒØªØ¨ Ù‚Ø¨Ù„ Ø³Ù† Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø¹Ø´Ø±Ø©ØŒ ÙˆÙ„Ø§ ØªÙ„Ù‚ÙŠÙ† Ù„Ù„Ø£Ø®Ù„Ø§Ù‚ Ø§Ù„Ù…Ø¬Ø±Ø¯Ø©. Ø¯Ø¹ÙˆÙ‡ ÙŠØªØ¹Ù„Ù… Ù…Ù† Ø¹ÙˆØ§Ù‚Ø¨ Ø£ÙØ¹Ø§Ù„Ù‡ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© (Ø¥Ø°Ø§ ÙƒØ³Ø± Ø§Ù„Ù†Ø§ÙØ°Ø©ØŒ Ø¯Ø¹Ù‡ ÙŠØ¨Ø±Ø¯). Ø§Ù„Ø·Ø¨ÙŠØ¹Ø© Ù‡ÙŠ Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø£ÙˆÙ„ØŒ ÙˆØ§Ù„Ù‡Ø¯Ù Ù‡Ùˆ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ÙØ·Ø±Ø© Ø§Ù„Ø®ÙŠØ±Ø© ÙˆØµÙŠØ§Ù†ØªÙ‡Ø§ Ø­ØªÙ‰ ÙŠØ´ØªØ¯ Ø¹ÙˆØ¯Ù‡.",
            era: "Ø¹ØµØ± Ø§Ù„ØªÙ†ÙˆÙŠØ±/Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© (Ø±ÙˆØ³Ùˆ)",
            authority: "Ø§Ù„Ø·Ø¨ÙŠØ¹Ø© (Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ù†Ù…Ùˆ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ)",
            goal: "Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ø§Ù„Ø­Ø± ÙˆØ§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ÙØ·Ø±Ø©",
            values: "Ø§Ù„Ø­Ø±ÙŠØ©ØŒ Ø§Ø­ØªØ±Ø§Ù… Ø§Ù„Ø·ÙÙˆÙ„Ø©ØŒ ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø·Ø¨ÙŠØ¹Ø©",
            learner: "Ù…Ø­ÙˆØ± Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (Ø·ÙÙ„ Ù„Ù‡ Ø®ØµÙˆØµÙŠØ§Øª ÙŠØ¬Ø¨ Ø§Ø­ØªØ±Ø§Ù…Ù‡Ø§)"
        },
        {
            id: 7,
            text: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© ØªØ´Ø¨Ù‡ Ø§Ù„Ù…ØµÙ†Ø¹. ØµÙÙˆÙ Ù…Ù†ØªØ¸Ù…Ø©ØŒ Ø¬Ø±Ø³ ÙŠØ­Ø¯Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬ØŒ ÙˆØ²ÙŠ Ù…ÙˆØ­Ø¯. Ø§Ù„Ù…Ø¹Ù„Ù… ÙŠÙ„Ù‚ÙŠ ÙˆØ§Ù„Ù…Ø¹Ø±ÙØ© Ø¬Ø§Ù‡Ø²Ø© ÙˆÙ…Ø¬Ø²Ø£Ø© Ø¥Ù„Ù‰ Ù…ÙˆØ§Ø¯ Ù…Ù†ÙØµÙ„Ø©. Ø§Ù„Ù‡Ø¯Ù Ù‡Ùˆ ØªØ®Ø±ÙŠØ¬ Ø¹Ù…Ø§Ù„ ÙˆÙ…ÙˆØ¸ÙÙŠÙ† Ù…Ø·ÙŠØ¹ÙŠÙ† ÙŠÙ…ØªÙ„ÙƒÙˆÙ† Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙˆØ§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø«ÙˆØ±Ø© Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©.",
            era: "Ø§Ù„Ù‚Ø±Ù† 19 (Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠØ©)",
            authority: "Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©",
            goal: "Ù…Ø­Ùˆ Ø§Ù„Ø£Ù…ÙŠØ© ÙˆØªÙˆÙÙŠØ± Ø§Ù„ÙŠØ¯ Ø§Ù„Ø¹Ø§Ù…Ù„Ø©",
            values: "Ø§Ù„Ù†Ø¸Ø§Ù…ØŒ Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·ØŒ ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©",
            learner: "ÙˆØ¹Ø§Ø¡ ÙŠÙÙ…Ù„Ø£ Ø¨Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª (Ø±Ù‚Ù… ÙÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø©)"
        },
        {
            id: 8,
            text: "Ø§Ù„Ø£Ø·ÙØ§Ù„ ÙŠØ¹Ù…Ù„ÙˆÙ† ÙÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ù„Ø¨Ù†Ø§Ø¡ Ù…Ø¬Ø³Ù… Ù„Ù…Ø¯ÙŠÙ†ØªÙ‡Ù…. ÙŠÙˆØ§Ø¬Ù‡ÙˆÙ† Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§ØªØŒ ÙÙŠØ¨Ø­Ø«ÙˆÙ† Ø¨Ø£Ù†ÙØ³Ù‡Ù… Ø¹Ù† Ø§Ù„Ø­Ù„ØŒ ÙˆÙŠØ¬Ø±Ø¨ÙˆÙ†ØŒ Ø«Ù… ÙŠØ³ØªÙ†ØªØ¬ÙˆÙ†. Ø§Ù„Ù…Ø¹Ù„Ù… ÙŠØªØ¬ÙˆÙ„ Ø¨ÙŠÙ†Ù‡Ù… ÙƒÙ…ÙˆØ¬Ù‡ ÙÙ‚Ø·. Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ù‡Ù†Ø§ Ù„ÙŠØ³Øª Ù…ÙƒØ§Ù†Ø§Ù‹ Ù„Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ù„Ù„Ø­ÙŠØ§Ø©ØŒ Ø¨Ù„ Ù‡ÙŠ Ø§Ù„Ø­ÙŠØ§Ø© Ù†ÙØ³Ù‡Ø§ØŒ Ø­ÙŠØ« ÙŠÙ…Ø§Ø±Ø³ Ø§Ù„Ø·ÙÙ„ Ø§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ© ÙˆØ§Ù„ØªØ¹Ø§ÙˆÙ† Ø¨Ø´ÙƒÙ„ ÙØ¹Ù„ÙŠ.",
            era: "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø­Ø¯ÙŠØ«Ø© (Ø§Ù„Ø¨Ø±Ø§ØºÙ…Ø§ØªÙŠØ©/Ø¯ÙŠÙˆÙŠ)",
            authority: "Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ (Ø§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠ)",
            goal: "Ø§Ù„Ù†Ù…Ùˆ Ø§Ù„Ù…Ø³ØªÙ…Ø± ÙˆØ­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø§Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©",
            values: "Ø§Ù„Ù†ÙØ¹ÙŠØ©ØŒ Ø§Ù„ØªØ¹Ø§ÙˆÙ†ØŒ ÙˆØ§Ù„Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ©",
            learner: "ÙØ§Ø¹Ù„ Ø¥ÙŠØ¬Ø§Ø¨ÙŠ ÙŠØ¨Ù†ÙŠ Ù…Ø¹Ø±ÙØªÙ‡ Ø¨Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø©"
        },
        {
            id: 9,
            text: "ÙŠÙ‚ÙˆÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø§Ù„Ù…: 'Ù†Ø­Ù† Ù„Ø§ Ù†Ø±Ø¨ÙŠ Ø§Ù„Ø·ÙÙ„ Ù„Ù†ÙØ³Ù‡ØŒ Ø¨Ù„ Ù„Ù„Ù…Ø¬ØªÙ…Ø¹'. Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ù‡ÙŠ Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø§Ù„ØªÙŠ ØªÙ…Ø§Ø±Ø³ 'Ø§Ù„Ù‚Ù‡Ø± Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ' Ø§Ù„Ù„Ø·ÙŠÙ Ù„Ø¯Ù…Ø¬ Ø§Ù„ÙØ±Ø¯ ÙÙŠ Ø§Ù„Ø¬Ù…Ø§Ø¹Ø©. Ù…Ù† Ø®Ù„Ø§Ù„Ù‡Ø§ØŒ ÙŠÙƒØªØ³Ø¨ Ø§Ù„Ø·ÙÙ„ Ø§Ù„Ù„ØºØ© ÙˆØ§Ù„Ù‚ÙŠÙ… ÙˆØ§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„ØªÙŠ ØªØ¬Ø¹Ù„Ù‡ ÙƒØ§Ø¦Ù†Ø§Ù‹ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Ù‹ Ù…ØªÙˆØ§ÙÙ‚Ø§Ù‹ Ù…Ø¹ Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø¬Ù…Ø¹ÙŠ.",
            era: "Ø§Ù„Ù…Ù‚Ø§Ø±Ø¨Ø© Ø§Ù„Ø³ÙˆØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ© (Ø¯ÙˆØ±ÙƒØ§ÙŠÙ…)",
            authority: "Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ (Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø¬Ù…Ø¹ÙŠ)",
            goal: "Ø§Ù„ØªÙ†Ø´Ø¦Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© (ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒØ§Ø¦Ù† Ø§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠ Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ)",
            values: "Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ØŒ Ø§Ù„ØªØ¬Ø§Ù†Ø³ØŒ ÙˆØ§Ù„ÙˆØ§Ø¬Ø¨ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ",
            learner: "Ù…Ø§Ø¯Ø© Ø®Ø§Ù… ÙŠØ´ÙƒÙ„Ù‡Ø§ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹"
        },
        {
            id: 10,
            text: "Ù„Ù… ÙŠØ¹Ø¯ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø¹Ø§Ø±ÙØŒ Ø¨Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ ØªØ¬Ù†ÙŠØ¯Ù‡Ø§ Ù„Ø­Ù„ ÙˆØ¶Ø¹ÙŠØ§Øª Ù…Ø¹Ù‚Ø¯Ø©. Ø§Ù„ØªÙ„Ù…ÙŠØ° ÙŠÙˆØ§Ø¬Ù‡ ÙˆØ¶Ø¹ÙŠØ©-Ù…Ø´ÙƒÙ„Ø© Ù…Ø³ØªÙ…Ø¯Ø© Ù…Ù† Ø§Ù„ÙˆØ§Ù‚Ø¹ØŒ ÙˆÙŠØ­ØªØ§Ø¬ Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…ÙˆØ§Ø±Ø¯ Ù…Ø®ØªÙ„ÙØ© (Ù…Ø¹Ø§Ø±ÙØŒ Ù…Ù‡Ø§Ø±Ø§ØªØŒ Ù…ÙˆØ§Ù‚Ù) Ù„Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡Ø§. Ø§Ù„Ø®Ø·Ø£ Ù‡Ù†Ø§ Ù„ÙŠØ³ Ø¬Ø±ÙŠÙ…Ø© Ø¨Ù„ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù„Ù„ØªØ¹Ù„Ù…ØŒ ÙˆØ§Ù„Ù…Ø¯Ø±Ø³ ÙŠØ®Ø·Ø· ÙˆÙŠØ¯Ø¨Ø± ÙˆÙŠÙ‚ÙˆÙ….",
            era: "Ø§Ù„Ù…Ù‚Ø§Ø±Ø¨Ø© Ø¨Ø§Ù„ÙƒÙØ§ÙŠØ§Øª (Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ù…Ø¹Ø§ØµØ±Ø©)",
            authority: "Ø§Ù„Ø´Ø±Ø§ÙƒØ© (Ø§Ù„Ù…Ø¯Ø±Ø³Ø©ØŒ Ø§Ù„Ù…ØªØ¹Ù„Ù…ØŒ Ø§Ù„Ù…Ø­ÙŠØ·)",
            goal: "ØªÙ†Ù…ÙŠØ© Ø§Ù„ÙƒÙØ§ÙŠØ§Øª ÙˆØ§Ù„Ø§Ø³ØªÙ‚Ù„Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙƒÙŠÙ",
            values: "Ø§Ù„Ø¬ÙˆØ¯Ø©ØŒ Ø§Ù„Ø¥Ù†ØµØ§ÙØŒ ÙˆØ§Ù„ÙˆØ¸ÙŠÙÙŠØ©",
            learner: "ÙØ§Ø¹Ù„ Ù…Ø­ÙˆØ±ÙŠ ÙŠØ¨Ù†ÙŠ ØªØ¹Ù„Ù…Ø§ØªÙ‡ Ø°Ø§ØªÙŠØ§Ù‹"
        }
    ];

    // The 5 Steps for analysis
    const stepsLabels = [
        { key: 'era',       label: "â³ 1. Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ© Ø£Ùˆ Ø§Ù„Ø§ØªØ¬Ø§Ù‡:" },
        { key: 'authority', label: "âš–ï¸ 2. Ù…Ù† Ù‡ÙŠ Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„Ø©/Ø§Ù„Ù…ØªØ­ÙƒÙ…Ø©ØŸ" },
        { key: 'goal',      label: "ğŸ¯ 3. Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù…Ù† Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù‡Ù†Ø§ØŸ" },
        { key: 'values',    label: "ğŸ’ 4. Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù‚ÙŠÙ… ÙˆØ§Ù„Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ù…ÙˆØ¬Ù‡Ø©ØŸ" },
        { key: 'learner',   label: "ğŸ‘¤ 5. ÙƒÙŠÙ Ù‡ÙŠ Ù…ÙƒØ§Ù†Ø© Ø§Ù„Ù…ØªØ¹Ù„Ù…ØŸ" }
    ];

    /* ================= GAME LOGIC ================= */
    let totalScore = 0;
    
    let scenarioIndex = 0;
    let stepIndex = 0;

    function shuffleArray(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function updateScore() {
        document.getElementById('score').innerText = totalScore;
    }

    function startGame() {
        totalScore = 0;
        scenarioIndex = 0;
        stepIndex = 0;
        updateScore();
        
        // Load first scenario
        loadScenarioStep();
        
        document.getElementById('screen-intro').classList.remove('active');
        document.getElementById('screen-game').classList.add('active');
    }

    function loadScenarioStep() {
        const data = scenarios[scenarioIndex];
        const step = stepsLabels[stepIndex];

        // UI Update
        document.getElementById('s-counter').innerText = `ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Øµ ${scenarioIndex + 1} / ${scenarios.length}`;
        document.getElementById('s-text').innerText = `"${data.text}"`;
        document.getElementById('s-step-label').innerText = step.label;
        
        const optionsDiv = document.getElementById('s-options');
        const feedbackEl = document.getElementById('s-feedback');
        const nextBtn = document.getElementById('s-next-btn');
        const progressBar = document.getElementById('progress');

        feedbackEl.innerText = "";
        nextBtn.style.display = "none";
        optionsDiv.innerHTML = "";

        // Progress
        let totalSteps = scenarios.length * 5;
        let currentStepAbs = (scenarioIndex * 5) + stepIndex;
        let progressPercent = (currentStepAbs / totalSteps) * 100;
        progressBar.style.width = `${progressPercent}%`;

        // Generate Options
        const correctAns = data[step.key];
        
        // Distractors: Get same key from other scenarios
        let distractors = scenarios
            .filter((_, i) => i !== scenarioIndex)
            .map(s => s[step.key]);
        
        // Filter unique distractors (some might be similar) and pick 2
        distractors = [...new Set(distractors)];
        shuffleArray(distractors);
        
        // Safety check if we don't have enough unique distractors (unlikely with 10 varied scenarios)
        let options = [correctAns, distractors[0], distractors[1]];
        shuffleArray(options);

        createButtons(optionsDiv, options, correctAns);
    }

    function createButtons(container, optionsList, correctText) {
        optionsList.forEach(opt => {
            if(!opt) return;
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = function() { checkAnswer(this, opt, correctText, container); };
            container.appendChild(btn);
        });
    }

    function checkAnswer(btn, selected, correct, container) {
        const allBtns = container.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.disabled = true);

        const feedbackEl = document.getElementById('s-feedback');
        const nextBtn = document.getElementById('s-next-btn');

        if (selected === correct) {
            btn.classList.add('correct');
            totalScore += 20; // High score for analysis
            updateScore();
            feedbackEl.innerText = "âœ… ØªØ­Ù„ÙŠÙ„ Ø¯Ù‚ÙŠÙ‚!";
            feedbackEl.style.color = "#27ae60";
        } else {
            btn.classList.add('wrong');
            allBtns.forEach(b => {
                if (b.innerText === correct) b.classList.add('correct');
            });
            feedbackEl.innerText = "âŒ ØªØ­Ù„ÙŠÙ„ Ø®Ø§Ø·Ø¦.";
            feedbackEl.style.color = "#c0392b";
        }
        nextBtn.style.display = "block";
    }

    function nextGameStep() {
        stepIndex++;
        // If finished all 5 steps for current scenario
        if (stepIndex >= stepsLabels.length) {
            stepIndex = 0;
            scenarioIndex++;
            // If finished all scenarios
            if (scenarioIndex >= scenarios.length) {
                finishExam();
                return;
            }
        }
        loadScenarioStep();
    }

    function finishExam() {
        document.getElementById('screen-game').classList.remove('active');
        document.getElementById('screen-result').classList.add('active');
        document.getElementById('progress').style.width = "100%";
        document.getElementById('final-score').innerText = totalScore;
        
        // Max Score: 10 scenarios * 5 steps * 20 points = 1000
        const maxScore = 1000;
        const percentage = (totalScore / maxScore) * 100;
        const msgEl = document.getElementById('final-msg');

        if (percentage >= 85) {
            msgEl.innerText = "Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ù…Ø­Ù„Ù„ ØªØ±Ø¨ÙˆÙŠ Ø®Ø¨ÙŠØ±! ğŸ•µï¸â€â™‚ï¸ğŸ“";
            msgEl.style.color = "#27ae60";
        } else if (percentage >= 50) {
            msgEl.innerText = "ØªØ­Ù„ÙŠÙ„ Ø¬ÙŠØ¯ØŒ Ù„ÙƒÙ† ØªØ­ØªØ§Ø¬ Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªØ¯Ø±ÙŠØ¨ ğŸ“Š";
            msgEl.style.color = "#e67e22";
        } else {
            msgEl.innerText = "Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙŠØ­ØªØ§Ø¬ Ù„ØªØ±ÙƒÙŠØ² Ø£ÙƒØ¨Ø±ØŒ Ø£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©! ğŸ’ª";
            msgEl.style.color = "#c0392b";
        }
    }
</script>

</body>
</html>
</div>
          