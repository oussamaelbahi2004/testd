<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULTIMATE CONJUGAISON QUIZ</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* RANKS COLORS */
            --bronze: #cd7f32;
            --silver: #bdc3c7;
            --gold: #f1c40f;
            --platinum: #00cec9;
            --diamond: #9b59b6;
            --heroic: #e74c3c;
            --grandmaster: #2d3436; /* Noir & Dor√© */
            
            --current-color: var(--bronze); /* Change dynamiquement */
            --bg-body: #f5f6fa;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-body);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            transition: background 0.5s;
        }

        /* --- NAVIGATION --- */
        .nav-bar {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        .btn-rojo3 {
            text-decoration: none;
            background: #2d3436;
            color: white;
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 0.9rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        /* --- GAME CONTAINER --- */
        .game-container {
            margin-top: 40px;
            background: white;
            width: 90%;
            max-width: 700px;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            text-align: center;
            border-top: 10px solid var(--current-color);
            position: relative;
            overflow: hidden;
        }

        /* RANK BADGE */
        .rank-badge {
            background: var(--current-color);
            color: white;
            display: inline-block;
            padding: 5px 20px;
            border-radius: 0 0 15px 15px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: background 0.3s;
        }

        /* PROGRESS BAR */
        .progress-container {
            width: 100%;
            background-color: #eee;
            border-radius: 10px;
            margin: 40px 0 20px 0;
            height: 10px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            width: 0%; /* JS update */
            background-color: var(--current-color);
            transition: width 0.3s, background-color 0.3s;
        }

        /* QUESTION */
        .q-context {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-bottom: 5px;
            font-weight: 600;
        }
        .q-verb {
            font-size: 2.5rem;
            font-weight: 900;
            color: #2c3e50;
            margin: 10px 0;
        }
        .q-tense {
            display: inline-block;
            background: #dfe6e9;
            color: #2d3436;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* INPUT AREA */
        input[type="text"] {
            width: 80%;
            padding: 15px;
            font-size: 1.3rem;
            text-align: center;
            border: 3px solid #eee;
            border-radius: 50px;
            margin: 30px 0;
            outline: none;
            transition: border 0.3s;
            font-family: 'Poppins', sans-serif;
        }
        input[type="text"]:focus {
            border-color: var(--current-color);
        }

        .btn-validate {
            background: var(--current-color);
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.2rem;
            font-weight: 900;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, background 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .btn-validate:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        /* FEEDBACK */
        .feedback {
            height: 30px;
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.1rem;
        }
        .correct { color: #27ae60; }
        .wrong { color: #e74c3c; }

        /* END SCREEN */
        .end-screen {
            display: none;
        }
        .end-title {
            font-size: 3rem;
            color: var(--current-color);
        }

        @media (max-width: 600px) {
            .game-container { padding: 20px; width: 95%; }
            .q-verb { font-size: 2rem; }
            input[type="text"] { width: 100%; }
        }
    </style>
</head>
<body>

<div class="nav-bar">
    <a href="index.html" class="btn-rojo3">Rojo3</a> </div>

<div class="game-container">
    <div class="rank-badge" id="rank-display">BRONZE I</div>
    
    <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div id="play-area">
        <div class="q-context" id="q-pronoun">Je ...</div>
        <div class="q-verb" id="q-verb">Manger</div>
        <div class="q-tense" id="q-tense">Pr√©sent</div>

        <br>
        <input type="text" id="user-input" placeholder="Ta r√©ponse..." autocomplete="off">
        <br>
        <button class="btn-validate" onclick="checkAnswer()">VALIDER</button>
        <div class="feedback" id="feedback"></div>
    </div>

    <div id="end-area" class="end-screen">
        <h1 class="end-title">F√âLICITATIONS !</h1>
        <p>Tu es un vrai Ma√Ætre de la Conjugaison.</p>
        <p>Score Final : <span id="final-score"></span> / 50</p>
        <button class="btn-validate" onclick="location.reload()">REJOUER</button>
    </div>
</div>

<script>
    /* =========================================
       1. DATABASE (50 QUESTIONS / MIXED TENSES)
       Structure: [Verbe, Pronom, Temps, R√©ponse]
    ========================================= */
    const questions = [
        // --- üü´ BRONZE (1-7) : Pr√©sent & Futur Simple (Easy) ---
        { v: "Parler", p: "Je", t: "Pr√©sent", a: "parle" },
        { v: "Finir", p: "Tu", t: "Pr√©sent", a: "finis" },
        { v: "Avoir", p: "Il", t: "Pr√©sent", a: "a" },
        { v: "√ätre", p: "Nous", t: "Pr√©sent", a: "sommes" },
        { v: "Manger", p: "Demain, je", t: "Futur Simple", a: "mangerai" },
        { v: "Aller", p: "Demain, tu", t: "Futur Simple", a: "iras" },
        { v: "Faire", p: "Demain, vous", t: "Futur Simple", a: "ferez" },

        // --- ‚¨ú SILVER (8-14) : Imparfait & Pass√© Compos√© (Easy) ---
        { v: "Prendre", p: "Autrefois, je", t: "Imparfait", a: "prenais" },
        { v: "√ätre", p: "Autrefois, tu", t: "Imparfait", a: "√©tais" },
        { v: "Manger", p: "Autrefois, nous", t: "Imparfait", a: "mangions" },
        { v: "Chanter", p: "Hier, j'", t: "Pass√© Compos√©", a: "ai chant√©" },
        { v: "Finir", p: "Hier, tu", t: "Pass√© Compos√©", a: "as fini" },
        { v: "Aller", p: "Hier, je (masc)", t: "Pass√© Compos√©", a: "suis all√©" },
        { v: "Venir", p: "Hier, nous", t: "Pass√© Compos√©", a: "sommes venus" },

        // --- üü® GOLD (15-21) : Subjonctif Pr√©sent ---
        { v: "Faire", p: "Il faut que je", t: "Subjonctif", a: "fasse" },
        { v: "Savoir", p: "Il faut que tu", t: "Subjonctif", a: "saches" },
        { v: "Pouvoir", p: "Il faut qu'il", t: "Subjonctif", a: "puisse" },
        { v: "Aller", p: "Il faut que nous", t: "Subjonctif", a: "allions" },
        { v: "√ätre", p: "Il faut que vous", t: "Subjonctif", a: "soyez" },
        { v: "Avoir", p: "Il faut qu'ils", t: "Subjonctif", a: "aient" },
        { v: "Boire", p: "Il faut que je", t: "Subjonctif", a: "boive" },

        // --- üü¶ PLATINUM (22-29) : Plus-que-parfait & Futur Ant√©rieur ---
        { v: "Manger", p: "J'", t: "Plus-que-parfait", a: "avais mang√©" },
        { v: "Partir", p: "J'", t: "Plus-que-parfait", a: "√©tais parti" },
        { v: "Voir", p: "Tu", t: "Plus-que-parfait", a: "avais vu" },
        { v: "Finir", p: "Quand j'", t: "Futur Ant√©rieur", a: "aurai fini" },
        { v: "Arriver", p: "Quand tu", t: "Futur Ant√©rieur", a: "seras arriv√©" },
        { v: "Dire", p: "Quand il", t: "Futur Ant√©rieur", a: "aura dit" },
        { v: "Vendre", p: "D√®s que nous", t: "Futur Ant√©rieur", a: "aurons vendu" },
        { v: "Na√Ætre", p: "Il", t: "Plus-que-parfait", a: "√©tait n√©" },

        // --- üíé DIAMOND (30-37) : Pass√© Simple (Famille A & I) ---
        { v: "Parler", p: "Soudain, il", t: "Pass√© Simple", a: "parla" },
        { v: "Manger", p: "Soudain, ils", t: "Pass√© Simple", a: "mang√®rent" },
        { v: "Finir", p: "Soudain, je", t: "Pass√© Simple", a: "finis" },
        { v: "Prendre", p: "Soudain, il", t: "Pass√© Simple", a: "prit" },
        { v: "Faire", p: "Soudain, ils", t: "Pass√© Simple", a: "firent" },
        { v: "Voir", p: "Soudain, je", t: "Pass√© Simple", a: "vis" },
        { v: "Dire", p: "Soudain, elle", t: "Pass√© Simple", a: "dit" },
        { v: "Aller", p: "Soudain, il", t: "Pass√© Simple", a: "alla" },

        // --- üëπ HEROIC (38-44) : Pass√© Simple (Famille U & IN) & Pass√© Ant√©rieur ---
        { v: "√ätre", p: "Soudain, je", t: "Pass√© Simple", a: "fus" },
        { v: "Avoir", p: "Soudain, ils", t: "Pass√© Simple", a: "eurent" },
        { v: "Courir", p: "Soudain, il", t: "Pass√© Simple", a: "courut" },
        { v: "Venir", p: "Soudain, il", t: "Pass√© Simple", a: "vint" },
        { v: "Mourir", p: "Soudain, ils", t: "Pass√© Simple", a: "moururent" },
        { v: "Manger", p: "D√®s qu'il", t: "Pass√© Ant√©rieur", a: "eut mang√©" },
        { v: "Partir", p: "D√®s qu'il", t: "Pass√© Ant√©rieur", a: "fut parti" },

        // --- üèÜ GRAND MASTER (45-50) : Pi√®ges & Irr√©guliers Ultimes ---
        { v: "Falloir", p: "Il (Imparfait)", t: "Imparfait", a: "fallait" },
        { v: "Pleuvoir", p: "Il (Futur)", t: "Futur Simple", a: "pleuvra" },
        { v: "Peindre", p: "Nous (Pr√©sent)", t: "Pr√©sent", a: "peignons" },
        { v: "Coudre", p: "Nous (Pr√©sent)", t: "Pr√©sent", a: "cousons" },
        { v: "Valoir", p: "Il faut qu'il", t: "Subjonctif", a: "vaille" },
        { v: "Acqu√©rir", p: "J' (Futur)", t: "Futur Simple", a: "acquerrai" } // Double R!
    ];

    /* =========================================
       2. VARIABLES D'√âTAT
    ========================================= */
    let currentQIndex = 0;
    let score = 0;
    const root = document.documentElement;

    /* =========================================
       3. LOGIQUE "NO ACCENT"
    ========================================= */
    function clean(str) {
        // Enl√®ve les accents, met en minuscule, enl√®ve les espaces autour
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().trim();
    }

    /* =========================================
       4. GESTION DES RANGS
    ========================================= */
    function updateRank() {
        const i = currentQIndex;
        let rankName = "BRONZE";
        let color = "#cd7f32";

        if (i >= 7) { rankName = "SILVER"; color = "#bdc3c7"; }
        if (i >= 14) { rankName = "GOLD"; color = "#f1c40f"; }
        if (i >= 21) { rankName = "PLATINUM"; color = "#00cec9"; }
        if (i >= 29) { rankName = "DIAMOND"; color = "#9b59b6"; }
        if (i >= 37) { rankName = "HEROIC"; color = "#e74c3c"; }
        if (i >= 44) { rankName = "GRAND MASTER"; color = "#2d3436"; }

        // Mise √† jour de l'interface
        document.getElementById('rank-display').innerText = rankName;
        root.style.setProperty('--current-color', color);
        
        // Progress bar
        const percent = ((i) / questions.length) * 100;
        document.getElementById('progress-bar').style.width = percent + "%";
    }

    /* =========================================
       5. JEU
    ========================================= */
    function loadQuestion() {
        if (currentQIndex >= questions.length) {
            endGame();
            return;
        }

        updateRank();
        const q = questions[currentQIndex];
        
        document.getElementById('q-pronoun').innerText = q.p;
        document.getElementById('q-verb').innerText = q.v;
        document.getElementById('q-tense').innerText = q.t;
        
        const input = document.getElementById('user-input');
        input.value = "";
        input.focus();
        document.getElementById('feedback').innerText = "";
    }

    function checkAnswer() {
        const userRaw = document.getElementById('user-input').value;
        const correctRaw = questions[currentQIndex].a;
        const fb = document.getElementById('feedback');

        // Comparaison souple (sans accent)
        if (clean(userRaw) === clean(correctRaw)) {
            score++;
            fb.innerHTML = `<span class="correct">Correct ! (${correctRaw})</span>`;
            fb.style.color = "var(--current-color)"; // Feedback color√©
            setTimeout(() => {
                currentQIndex++;
                loadQuestion();
            }, 1000);
        } else {
            fb.innerHTML = `<span class="wrong">Faux ! C'√©tait : ${correctRaw}</span>`;
            setTimeout(() => {
                currentQIndex++;
                loadQuestion();
            }, 2500); // Plus de temps pour lire la correction
        }
    }

    function endGame() {
        document.getElementById('play-area').style.display = 'none';
        document.getElementById('rank-display').style.display = 'none';
        document.getElementById('end-area').style.display = 'block';
        document.getElementById('final-score').innerText = score;
        document.getElementById('progress-bar').style.width = "100%";
        
        // Couleur finale
        root.style.setProperty('--current-color', '#2d3436');
    }

    // Gestion de la touche Entr√©e
    document.getElementById('user-input').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            checkAnswer();
        }
    });

    // D√©marrage
    loadQuestion();

</script>

</body>
</html>
