<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¨ÙˆØµÙ„Ø© Ø§Ù„Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ© - ENS</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8e44ad; /* Ù„ÙˆÙ† Ù…Ù…ÙŠØ² Ù„Ù„Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ */
            --secondary: #2c3e50;
            --accent: #f1c40f;
            --success: #27ae60;
            --error: #c0392b;
            --bg: #f4ecf7;
            --card: #ffffff;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--secondary);
            padding: 20px;
        }

        .container {
            background: var(--card);
            width: 100%;
            max-width: 750px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
            min-height: 680px;
            display: flex;
            flex-direction: column;
            border-top: 5px solid var(--primary);
        }

        /* Header */
        .header {
            background: #fff;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            font-size: 1.1rem;
            border-bottom: 1px solid #eee;
        }

        .badge {
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
        }

        .back-button {
            background: linear-gradient(135deg, var(--primary), #6c3483);
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(142, 68, 173, 0.3);
        }

        .back-button:hover {
            background: linear-gradient(135deg, #6c3483, var(--primary));
            transform: translateX(-3px);
            box-shadow: 0 4px 12px rgba(142, 68, 173, 0.4);
        }

        /* Progress */
        .progress-bar {
            height: 8px;
            background: #eee;
            width: 100%;
        }
        .progress-fill {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Screens */
        .screen {
            flex: 1;
            padding: 30px;
            text-align: center;
            display: none;
            flex-direction: column;
            justify-content: center;
            animation: fadeIn 0.4s ease;
        }
        
        .screen.active { display: flex; }

        h1 { margin: 0 0 10px 0; color: var(--primary); font-size: 2rem; }

        /* Card Design */
        .info-card {
            background: #fbfbfb;
            border: 2px solid #e8daef;
            padding: 25px;
            text-align: center;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            position: relative;
        }

        .info-text {
            font-size: 1.4rem;
            font-weight: 800;
            line-height: 1.5;
            color: #2c3e50;
        }

        .type-tag {
            display: inline-block;
            background: var(--secondary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .step-label {
            display: inline-block;
            background: #ffffff;
            color: var(--primary);
            padding: 8px 25px;
            border-radius: 50px;
            margin-bottom: 20px;
            font-weight: bold;
            font-size: 1rem;
            border: 1px solid #d2b4de;
        }

        /* Grid */
        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
        }

        .option-btn {
            background: white;
            border: 2px solid #d5dbdb;
            padding: 16px;
            border-radius: 12px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Tajawal', sans-serif;
            color: var(--secondary);
            font-weight: 600;
        }

        .option-btn:hover:not([disabled]) {
            border-color: var(--primary);
            background: #f4ecf7;
            transform: translateX(5px);
        }

        .option-btn.correct {
            background: #d5f5e3;
            border-color: var(--success);
            color: var(--success);
        }

        .option-btn.wrong {
            background: #fadbd8;
            border-color: var(--error);
            color: var(--error);
        }

        /* Controls */
        .next-btn {
            margin-top: 25px;
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 50px;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            display: none;
            align-self: center;
        }
        .next-btn:hover { background: #6c3483; }

        .start-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 15px 50px;
            border-radius: 50px;
            font-size: 1.4rem;
            cursor: pointer;
            font-weight: bold;
            margin-top: 30px;
        }

        .feedback {
            margin-top: 15px;
            font-weight: bold;
            min-height: 25px;
            font-size: 1.1rem;
        }

        .final-score {
            font-size: 4rem;
            color: var(--primary);
            font-weight: 800;
            margin: 20px 0;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <button class="back-button" onclick="window.location.href='SE5IYARATBIDA5OJIYACOURE.html'">
            â† Ø±Ø¬ÙˆØ¹
        </button>
        <div id="section-title">Ø§Ù„Ø¨ÙˆØµÙ„Ø© Ø§Ù„Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ©</div>
        <div class="badge">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>

    <div class="screen active" id="screen-intro">
        <h1>Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ© ğŸ§­</h1>
        <p style="font-size:1.1rem; color:#555;">Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙ…ÙŠÙŠØ² Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†ØŒ Ø§Ù„Ø£Ù‡Ø¯Ø§ÙØŒ ÙˆØ§Ù„ÙƒÙØ§ÙŠØ§ØªØŸ</p>
        <div style="background:#fff; padding:20px; border-radius:15px; margin:20px 0; border:1px solid #eee; text-align:right;">
            <p>1ï¸âƒ£ <strong>Ø§Ù„Ù‡ÙˆÙŠØ©:</strong> Ù…ØªÙ‰ Ø§Ø¹ØªÙ…Ø¯ØªØŸ ÙˆÙ…Ø§ Ù‡ÙŠ ÙÙƒØ±ØªÙ‡Ø§ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠØ©ØŸ</p>
            <p>2ï¸âƒ£ <strong>Ø§Ù„ØªØ­Ù„ÙŠÙ„:</strong> Ù…Ø§ Ù‡ÙŠ Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ§ØªÙ‡Ø§ ÙˆØ³Ù„Ø¨ÙŠØ§ØªÙ‡Ø§ (Ø§Ù„Ø­Ø¯ÙˆØ¯)ØŸ</p>
            <p>3ï¸âƒ£ <strong>Ø§Ø®ØªØ¨Ø§Ø± QCM:</strong> Ø£Ø³Ø¦Ù„Ø© Ø¯Ù‚ÙŠÙ‚Ø© Ø­ÙˆÙ„ Ø§Ù„ÙØ±ÙˆÙ‚Ø§Øª.</p>
        </div>
        <button class="start-btn" onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØµÙ†ÙŠÙ</button>
    </div>

    <div class="screen" id="screen-game">
        <div class="type-tag" id="g-type">...</div>
        
        <div class="info-card">
            <div class="info-text" id="g-text">...</div>
        </div>

        <div class="step-label" id="g-instruction">...</div>
        
        <div class="options-grid" id="g-options"></div>
        <div class="feedback" id="g-feedback"></div>
        <button class="next-btn" id="g-next-btn" onclick="nextGameStep()">ØªØ§Ø¨Ø¹</button>
    </div>

    <div class="screen" id="screen-qcm">
        <div class="step-label" style="background:var(--secondary); color:white; border:none;" id="qcm-counter">Ø³Ø¤Ø§Ù„ 1</div>
        <h2 id="qcm-text" style="line-height:1.5; margin-bottom:20px;">...</h2>
        <div class="options-grid" id="qcm-options"></div>
        <div class="feedback" id="qcm-feedback"></div>
        <button class="next-btn" id="qcm-next-btn" onclick="nextQCMStep()">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>

    <div class="screen" id="screen-result">
        <h1>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h1>
        <div class="final-score" id="final-score">0</div>
        <p id="final-msg" style="font-size:1.3rem;">...</p>
        <button class="start-btn" style="background:var(--secondary)" onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
    </div>
</div>

<script>
    /* ================= DATA: Pedagogical Approaches ================= */
    /* Based on  */
    
    // Level 1: Identification (ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù‡ÙˆÙŠØ©) - Date & Core Idea
    const level1_identity = [
        { text: "Ø§Ø¹ØªÙ…Ø¯Øª Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªÙ‚Ù„Ø§Ù„ (Ø£Ù‚Ø¯Ù… Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§)", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†" },
        { text: "Ø§Ø¹ØªÙ…Ø¯Øª ÙÙŠ Ø§Ù„Ø³Ø¨Ø¹ÙŠÙ†ÙŠØ§Øª ÙˆØ§Ù„Ø«Ù…Ø§Ù†ÙŠÙ†ÙŠØ§Øª", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù" },
        { text: "Ø§Ø¹ØªÙ…Ø¯Øª Ø³Ù†Ø© 2000 Ù…Ø¹ Ø§Ù„Ù…ÙŠØ«Ø§Ù‚ Ø§Ù„ÙˆØ·Ù†ÙŠ", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª" },
        { text: "Ø§Ù„Ø£Ø³ØªØ§Ø° Ù‡Ùˆ Ø§Ù„Ù†Ø§Ù‚Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù„Ù„Ù…Ø¹Ø±ÙØ© ÙˆØ§Ù„Ù…ØªØ¹Ù„Ù… Ù…ØªÙ„Ù‚ Ø³Ù„Ø¨ÙŠ", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†" },
        { text: "ØªÙ‚ÙˆÙ… Ø¹Ù„Ù‰ ØµÙŠØ§ØºØ© Ø£Ù‡Ø¯Ø§Ù Ø³Ù„ÙˆÙƒÙŠØ© (Ù…Ø¹Ø±ÙÙŠØ©ØŒ Ù…Ù‡Ø§Ø±ÙŠØ©ØŒ ÙˆØ¬Ø¯Ø§Ù†ÙŠØ©)", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù" },
        { text: "ØªÙ‚ÙˆÙ… Ø¹Ù„Ù‰ Ø¯Ù…Ø¬ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ù„Ø­Ù„ ÙˆØ¶Ø¹ÙŠØ§Øª Ù…Ø´ÙƒÙ„Ø©", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª" },
        { text: "ØªØ±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§Ø±Ù ÙˆØ§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª ÙƒØ¬ÙˆÙ‡Ø± Ù„Ù„ØªØ¹Ù„Ù…", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†" },
        { text: "ØªØ±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù…Ù† Ø§Ù„Ù…ØªØ¹Ù„Ù…", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù" }
    ];

    // Level 2: Pros & Cons (Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ§Øª ÙˆØ§Ù„Ø³Ù„Ø¨ÙŠØ§Øª)
    const level2_analysis = [
        { text: "ÙˆØ¶ÙˆØ­ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙˆØ³Ù‡ÙˆÙ„Ø© Ø§Ù„ØªÙ‚ÙˆÙŠÙ…", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†", type: "Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©" },
        { text: "ØªØºÙŠÙŠØ¨ Ù†Ø´Ø§Ø· Ø§Ù„Ù…ØªØ¹Ù„Ù… ÙˆØ¹Ø¯Ù… Ø§Ù„Ù…Ù„Ø§Ø¡Ù…Ø© Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ø¹Ø±ÙØ©", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†", type: "Ø³Ù„Ø¨ÙŠØ© (Ø­Ø¯ÙˆØ¯)" },
        { text: "Ø¯Ù‚Ø© Ø§Ù„ØªØ®Ø·ÙŠØ· ÙˆÙ‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„Ù‚ÙŠØ§Ø³", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù", type: "Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©" },
        { text: "ØªØ¬Ø²ÙŠØ¡ Ø§Ù„ØªØ¹Ù„Ù… ÙˆØ§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ Ù‚ØµÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ù‰", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù", type: "Ø³Ù„Ø¨ÙŠØ© (Ø­Ø¯ÙˆØ¯)" },
        { text: "ØªÙ†Ù…ÙŠØ© Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù†Ù‚Ø¯ÙŠ ÙˆØ§Ù„Ø§Ù†Ø¯Ù…Ø§Ø¬ ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø©", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª", type: "Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©" },
        { text: "ØµØ¹ÙˆØ¨Ø© Ø§Ù„ØªÙ‚ÙˆÙŠÙ… ÙˆØ¶Ø¹Ù ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠÙ†", pedagogy: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª", type: "Ø³Ù„Ø¨ÙŠØ© (Ø­Ø¯ÙˆØ¯)" }
    ];

    /* ================= DATA: QCM ================= */
    const qcmData = [
        { q: "Ø§Ù„Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ØªÙŠ ØªØ¹ØªØ¨Ø± Ø§Ù„Ù…ØªØ¹Ù„Ù… 'ÙˆØ¹Ø§Ø¡Ù‹ Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª' Ù‡ÙŠ:", o: ["Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø®Ø·Ø£"], a: 1 },
        { q: "Ø§Ù†ØªÙ‚Ù„ Ø§Ù„Ù…ØºØ±Ø¨ Ø±Ø³Ù…ÙŠØ§Ù‹ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ù‚Ø§Ø±Ø¨Ø© Ø¨Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ø³Ù†Ø©:", o: ["1956", "1980", "2000", "2015"], a: 2 },
        { q: "Ù…Ù† Ø¹ÙŠÙˆØ¨ Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù (PPO):", o: ["ØºÙ…ÙˆØ¶ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù", "ØªØ¬Ø²ÙŠØ¡ Ø§Ù„ÙØ¹Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ ÙˆØªÙØªÙŠØª Ø§Ù„Ù…Ø¹Ø±ÙØ©", "ØµØ¹ÙˆØ¨Ø© Ø§Ù„ØªÙ‚ÙˆÙŠÙ…", "ØºÙŠØ§Ø¨ Ø§Ù„ØªØ®Ø·ÙŠØ·"], a: 1 },
        { q: "Ø§Ù„Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ ÙÙŠ Ø§Ù„Ù…Ù‚Ø§Ø±Ø¨Ø© Ø¨Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ù‡Ùˆ:", o: ["Ø§Ù„Ø­ÙØ¸", "Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ", "Ø§Ù„ÙˆØ¶Ø¹ÙŠØ© Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙˆØ§Ù„Ø¥Ø¯Ù…Ø§Ø¬", "Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ"], a: 2 },
        { q: "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ ØªØ±ÙƒØ² Ø¹Ù„Ù‰ 'Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù…Ù„Ø§Ø­Ø¸Ø© ÙˆØ§Ù„Ù‚ÙŠØ§Ø³':", o: ["Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†", "Ø§Ù„Ù…Ù‚Ø§Ø±Ø¨Ø© Ø¨Ø§Ù„ÙƒÙØ§ÙŠØ§Øª", "Ø§Ù„Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙØ§Ø±Ù‚ÙŠØ©"], a: 0 },
        { q: "ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù ÙÙŠ Ø§Ù„Ù…ØºØ±Ø¨ Ø®Ù„Ø§Ù„:", o: ["ÙØªØ±Ø© Ø§Ù„Ø§Ø³ØªÙ‚Ù„Ø§Ù„", "Ø§Ù„Ø³Ø¨Ø¹ÙŠÙ†ÙŠØ§Øª ÙˆØ§Ù„Ø«Ù…Ø§Ù†ÙŠÙ†ÙŠØ§Øª", "Ø§Ù„Ø£Ù„ÙÙŠØ© Ø§Ù„Ø«Ø§Ù„Ø«Ø©", "ÙØªØ±Ø© Ø§Ù„Ø­Ù…Ø§ÙŠØ©"], a: 1 },
        { q: "ØªØªÙ…ÙŠØ² Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ† Ø¨Ù€:", o: ["ØµØ¹ÙˆØ¨Ø© Ø§Ù„ØªÙ‚ÙˆÙŠÙ…", "Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ØªÙ‚ÙˆÙŠÙ… ÙˆÙˆØ¶ÙˆØ­ Ø§Ù„Ù…Ø­ØªÙˆÙ‰", "Ù†Ø´Ø§Ø· Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø§Ù„Ù…ÙƒØ«Ù", "Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª"], a: 1 },
        { q: "Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£ÙƒØ¨Ø± Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ù‚Ø§Ø±Ø¨Ø© Ø¨Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ù‡Ùˆ:", o: ["ÙƒØ«Ø±Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹", "Ø¶Ø¹Ù ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø£Ø³Ø§ØªØ°Ø© ÙˆØµØ¹ÙˆØ¨Ø© Ø§Ù„ØªÙ‚ÙˆÙŠÙ…", "Ø±ÙØ¶ Ø§Ù„ØªÙ„Ø§Ù…ÙŠØ° Ù„Ù‡Ø§", "Ø³Ù‡ÙˆÙ„Ø© ØªØ·Ø¨ÙŠÙ‚Ù‡Ø§"], a: 1 },
        { q: "ÙÙŠ Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§ØªØŒ Ø¯ÙˆØ± Ø§Ù„Ù…ØªØ¹Ù„Ù… Ù‡Ùˆ:", o: ["Ù…ØªÙ„Ù‚ÙŠ Ø³Ù„Ø¨ÙŠ", "ÙØ§Ø¹Ù„ ÙŠØ¨Ù†ÙŠ ØªØ¹Ù„Ù…Ø§ØªÙ‡ ÙˆÙŠØ¯Ù…Ø¬ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯", "Ù…Ù†ÙØ° Ù„Ù„Ø£ÙˆØ§Ù…Ø±", "Ø­Ø§ÙØ¸ Ù„Ù„Ø¯Ø±ÙˆØ³"], a: 1 },
        { q: "Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ© Ø§Ù„ØªÙŠ Ø£Ø±Ø³Øª Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ù‡ÙŠ:", o: ["Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„Ø®Ù…Ø§Ø³ÙŠ", "Ø§Ù„Ù…ÙŠØ«Ø§Ù‚ Ø§Ù„ÙˆØ·Ù†ÙŠ Ù„Ù„ØªØ±Ø¨ÙŠØ© ÙˆØ§Ù„ØªÙƒÙˆÙŠÙ†", "Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø£Ø¨ÙŠØ¶", "Ø¯Ø³ØªÙˆØ± 2011"], a: 1 },
        { q: "Ù…ØµØ·Ù„Ø­ 'Mobilisation' (ØªØ¹Ø¨Ø¦Ø©/ØªØ¬Ù†ÙŠØ¯) Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ ÙŠØ®Øµ:", o: ["Ø§Ù„Ù…Ù‚Ø§Ø±Ø¨Ø© Ø¨Ø§Ù„ÙƒÙØ§ÙŠØ§Øª", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø­ØªÙˆÙ‰", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù„Ø¹Ø¨"], a: 0 },
        { q: "ØªØ±ÙƒØ² Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ† Ø¹Ù„Ù‰:", o: ["Ø§Ù„ÙƒÙ… Ø§Ù„Ù…Ø¹Ø±ÙÙŠ (Ø§Ù„Ø´Ø­Ù†)", "Ø§Ù„ÙƒÙŠÙ (Ø§Ù„Ù…Ù‡Ø§Ø±Ø©)", "Ø§Ù„Ù‚ÙŠÙ…", "Ø§Ù„ØªÙˆØ§ØµÙ„"], a: 0 },
        { q: "Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù†Ø¸Ø±ÙŠØ© Ù„Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ù‡ÙŠ:", o: ["Ø§Ù„Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ø¨Ù†Ø§Ø¦ÙŠØ©", "Ø§Ù„Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ø³Ù„ÙˆÙƒÙŠØ©", "Ø§Ù„Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ø¬Ø´ØªØ§Ù„ØªÙŠØ©", "Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ÙØ³ÙŠ"], a: 1 },
        { q: "Ø§Ù„Ù‡Ø¯Ù Ù…Ù† Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ù‡Ùˆ:", o: ["ØªØ¹Ù‚ÙŠØ¯ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©", "Ø±Ø¨Ø· Ø§Ù„ØªØ¹Ù„Ù… Ø¨Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØªÙ†Ù…ÙŠØ© Ø§Ù„Ø§Ø³ØªÙ‚Ù„Ø§Ù„ÙŠØ©", "Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©", "ØªÙ‚Ù„ÙŠØµ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„"], a: 1 },
        { q: "Ù…Ù† Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ§Øª Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù:", o: ["Ø§Ù„Ø´Ù…ÙˆÙ„ÙŠØ©", "Ø¯Ù‚Ø© Ø§Ù„ØªØ®Ø·ÙŠØ· ÙˆØ§Ù„ÙˆØ¶ÙˆØ­", "Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹", "Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¹Ù‚Ù„ÙŠØ© Ø§Ù„Ø¹Ù„ÙŠØ§"], a: 1 },
        { q: "ØªØ¹ØªØ¨Ø± 'ØµØ¹ÙˆØ¨Ø© Ø§Ù„ØªÙ‚ÙˆÙŠÙ…' Ù…Ù† Ø¹ÙˆØ§Ø¦Ù‚:", o: ["Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù", "Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø¹ØªÙŠÙ‚"], a: 1 },
        { q: "ÙÙŠ Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†ØŒ Ø§Ù„Ø³Ù„Ø·Ø© Ø§Ù„Ù…Ø¹Ø±ÙÙŠØ© Ø¨ÙŠØ¯:", o: ["Ø§Ù„Ù…ØªØ¹Ù„Ù…", "Ø§Ù„Ù…Ø¯Ø±Ø³ ÙˆØ§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ", "Ø§Ù„Ø£Ø³Ø±Ø©", "Ø§Ù„Ø¥Ø¹Ù„Ø§Ù…"], a: 1 },
        { q: "Ø§Ù„ÙƒÙØ§ÙŠØ© Ù‡ÙŠ Ù‚Ø¯Ø±Ø© Ø§Ù„Ù…ØªØ¹Ù„Ù… Ø¹Ù„Ù‰:", o: ["Ø§Ø³ØªØ¸Ù‡Ø§Ø± Ø¯Ø±Ø³ ÙƒØ§Ù…Ù„", "Ø­Ù„ ÙˆØ¶Ø¹ÙŠØ© Ù…Ø±ÙƒØ¨Ø© Ø¨ØªØ¹Ø¨Ø¦Ø© Ù…ÙˆØ§Ø±Ø¯ Ù…Ø¯Ù…Ø¬Ø©", "Ø§Ù„Ø¬Ù„ÙˆØ³ Ø¨Ù‡Ø¯ÙˆØ¡", "Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¨Ø®Ø· Ø¬Ù…ÙŠÙ„ ÙÙ‚Ø·"], a: 1 },
        { q: "Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØªÙŠ Ø³Ù…ÙŠØª Ø¨Ù€ 'Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ù‡ÙŠÙƒÙ„ÙŠ' ØªØ²Ø§Ù…Ù†Øª Ù…Ø¹ Ù‡ÙŠÙ…Ù†Ø©:", o: ["Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø¥Ø¯Ù…Ø§Ø¬", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"], a: 1 },
        { q: "Ø£ÙŠ Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ ØªØ¹ØªØ¨Ø± Ø§Ù„Ù…ØªØ¹Ù„Ù… 'ØµÙØ­Ø© Ø¨ÙŠØ¶Ø§Ø¡'ØŸ", o: ["Ø§Ù„ÙƒÙØ§ÙŠØ§Øª", "Ø§Ù„Ù…Ø¶Ù…ÙˆÙ† (ÙˆØ§Ù„Ø£Ù‡Ø¯Ø§Ù Ø¬Ø²Ø¦ÙŠØ§Ù‹)", "Ø§Ù„Ø¨Ù†Ø§Ø¦ÙŠØ©", "Ø§Ù„ÙØ§Ø±Ù‚ÙŠØ©"], a: 1 },
        { q: "Ø§Ù„ØªÙ‚ÙˆÙŠÙ… ÙÙŠ Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª ÙŠØ±ÙƒØ² Ø¹Ù„Ù‰:", o: ["Ø§Ù„Ø­ÙØ¸", "Ù…Ø¹Ø§ÙŠÙŠØ± ÙˆÙ…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ÙÙŠ ÙˆØ¶Ø¹ÙŠØ§Øª", "Ø§Ù„Ø³Ø±Ø¹Ø© ÙÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©", "Ø­Ø³Ù† Ø§Ù„Ø®Ø·"], a: 1 },
        { q: "Ù…Ù† Ø³Ù„Ø¨ÙŠØ§Øª Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†:", o: ["Ø¹Ø¯Ù… Ù…Ù„Ø§Ø¡Ù…ØªÙ‡Ø§ Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ø¹Ø±ÙØ©", "ØµØ¹ÙˆØ¨Ø© Ø§Ù„ÙÙ‡Ù…", "ØºÙ„Ø§Ø¡ Ø§Ù„ÙƒØªØ¨", "Ø·ÙˆÙ„ Ø§Ù„Ø¹Ø·Ù„"], a: 0 },
        { q: "Ù…ÙÙ‡ÙˆÙ… 'Ø§Ù„Ø¥Ø¯Ù…Ø§Ø¬' (IntÃ©gration) Ù‡Ùˆ Ø­Ø¬Ø± Ø§Ù„Ø²Ø§ÙˆÙŠØ© ÙÙŠ:", o: ["Ø§Ù„Ù…Ù‚Ø§Ø±Ø¨Ø© Ø¨Ø§Ù„ÙƒÙØ§ÙŠØ§Øª", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù", "Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­ÙˆØ§Ø±ÙŠØ©", "Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬"], a: 0 },
        { q: "ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§Øª ÙÙŠ Ø§Ù„Ù…ØºØ±Ø¨ Ø²Ù…Ù†ÙŠØ§Ù‹:", o: ["Ø£Ù‡Ø¯Ø§Ù -> ÙƒÙØ§ÙŠØ§Øª -> Ù…Ø¶Ù…ÙˆÙ†", "Ù…Ø¶Ù…ÙˆÙ† -> Ø£Ù‡Ø¯Ø§Ù -> ÙƒÙØ§ÙŠØ§Øª", "ÙƒÙØ§ÙŠØ§Øª -> Ù…Ø¶Ù…ÙˆÙ† -> Ø£Ù‡Ø¯Ø§Ù", "Ù…Ø¶Ù…ÙˆÙ† -> ÙƒÙØ§ÙŠØ§Øª -> Ø£Ù‡Ø¯Ø§Ù"], a: 1 },
        { q: "Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ 'Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ' (Ø§Ù„Ù…Ø¯Ø±Ø³Ø© ÙƒØ§Ù„Ù…ØµÙ†Ø¹) ÙŠØ±ØªØ¨Ø· Ø£ÙƒØ«Ø± Ø¨Ù€:", o: ["Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†/Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ©", "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©", "Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù†Ø¬Ø§Ø­", "Ù…Ø¯Ø±Ø³Ø© Ø§Ù„ÙØ±ØµØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©"], a: 0 },
        { q: "Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ù‡Ø¯Ù ÙˆØ§Ù„ÙƒÙØ§ÙŠØ©:", o: ["Ø§Ù„Ù‡Ø¯Ù Ø¬Ø²Ø¦ÙŠ ÙˆØ³Ù„ÙˆÙƒÙŠØŒ Ø§Ù„ÙƒÙØ§ÙŠØ© Ù…Ø±ÙƒØ¨Ø© ÙˆØ´Ø§Ù…Ù„Ø©", "Ø§Ù„Ù‡Ø¯Ù Ø£ØµØ¹Ø¨ Ù…Ù† Ø§Ù„ÙƒÙØ§ÙŠØ©", "Ù„Ø§ ÙØ±Ù‚", "Ø§Ù„Ù‡Ø¯Ù Ù„Ù„Ù…Ø¯Ø±Ø³ ÙˆØ§Ù„ÙƒÙØ§ÙŠØ© Ù„Ù„Ù…Ø¯ÙŠØ±"], a: 0 },
        { q: "ÙŠØ¹Ù†ÙŠ Ø§Ø®ØªØµØ§Ø± APC:", o: ["Approche Par Contenus", "Approche Par CompÃ©tences", "Approche Par Concepts", "Approche Par Classes"], a: 1 },
        { q: "ÙŠØ¹Ù†ÙŠ Ø§Ø®ØªØµØ§Ø± PPO:", o: ["PÃ©dagogie Par Objectifs", "Projet PÃ©dagogique", "Plan Par Objectif", "Programme Officiel"], a: 0 },
        { q: "ØªØ¹ØªÙ…Ø¯ Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª Ø¹Ù„Ù‰ Ù†Ø¸Ø±ÙŠØ§Øª ØªØ¹Ù„Ù… Ù…Ø«Ù„:", o: ["Ø§Ù„Ø¨Ù†Ø§Ø¦ÙŠØ© ÙˆØ§Ù„Ø³ÙˆØ³ÙŠÙˆØ¨Ù†Ø§Ø¦ÙŠØ©", "Ø§Ù„Ø³Ù„ÙˆÙƒÙŠØ© ÙÙ‚Ø·", "Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ÙØ³ÙŠ", "Ø§Ù„ÙˆØ±Ø§Ø«ÙŠØ©"], a: 0 },
        { q: "Ø£Ù‡Ù…ÙŠØ© 'Ø§Ù„ÙˆØ¶Ø¹ÙŠØ§Øª' ÙÙŠ Ø§Ù„ØªØ¯Ø±ÙŠØ³ Ø¸Ù‡Ø±Øª Ø¨Ù‚ÙˆØ© Ù…Ø¹:", o: ["Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†", "Ø§Ù„Ù…Ù‚Ø§Ø±Ø¨Ø© Ø¨Ø§Ù„ÙƒÙØ§ÙŠØ§Øª", "Ø§Ù„ÙƒØªØ§ØªÙŠØ¨ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ©", "Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø¹Ù† Ø¨Ø¹Ø¯"], a: 1 }
    ];

    /* ================= LOGIC ================= */
    let totalScore = 0;
    
    // Game Vars
    let gamePhase = 1; // 1: Identity, 2: Analysis
    let itemIndex = 0;
    let qcmIndex = 0;

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function shuffleArray(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function updateScore() {
        document.getElementById('score').innerText = totalScore;
    }

    function startGame() {
        totalScore = 0;
        gamePhase = 1;
        itemIndex = 0;
        qcmIndex = 0;
        updateScore();
        
        // Randomize
        shuffleArray(level1_identity);
        shuffleArray(level2_analysis);
        shuffleArray(qcmData);

        // Start Phase 1
        loadGameRound();
        showScreen('screen-game');
    }

    /* ------- Game Logic ------- */
    function loadGameRound() {
        let currentItem;
        let instruction = "";
        let options = ["Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù", "Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ Ø§Ù„ÙƒÙØ§ÙŠØ§Øª"];
        let typeText = "";

        if (gamePhase === 1) {
            currentItem = level1_identity[itemIndex];
            instruction = "Ø£ÙŠ Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ ÙŠÙ†Ø·Ø¨Ù‚ Ø¹Ù„ÙŠÙ‡Ø§ Ù‡Ø°Ø§ Ø§Ù„ÙˆØµÙØŸ";
            typeText = "ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù‡ÙˆÙŠØ©";
        } else {
            currentItem = level2_analysis[itemIndex];
            instruction = `Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© ØªØ¹ØªØ¨Ø± (${currentItem.type}) Ù„Ø£ÙŠ Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§ØŸ`;
            typeText = "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø®ØµØ§Ø¦Øµ";
        }

        // UI
        document.getElementById('g-type').innerText = typeText;
        document.getElementById('g-text').innerText = currentItem.text;
        document.getElementById('g-instruction').innerText = instruction;
        
        const optionsDiv = document.getElementById('g-options');
        const feedbackEl = document.getElementById('g-feedback');
        const nextBtn = document.getElementById('g-next-btn');
        const progressBar = document.getElementById('progress');

        feedbackEl.innerText = "";
        nextBtn.style.display = "none";
        optionsDiv.innerHTML = "";

        // Progress Calculation
        let totalGameItems = level1_identity.length + level2_analysis.length;
        let itemsDone = (gamePhase === 1 ? itemIndex : level1_identity.length + itemIndex);
        let progressPercent = (itemsDone / totalGameItems) * 50; 
        progressBar.style.width = `${progressPercent}%`;

        // Create Options
        let correctAns = currentItem.pedagogy;
        shuffleArray(options); // Shuffle options position

        createButtons(optionsDiv, options, correctAns, 'game');
    }

    function nextGameStep() {
        if (gamePhase === 1) {
            itemIndex++;
            if (itemIndex >= level1_identity.length) {
                gamePhase = 2;
                itemIndex = 0;
            }
        } else {
            itemIndex++;
            if (itemIndex >= level2_analysis.length) {
                startQCMPhase();
                return;
            }
        }
        loadGameRound();
    }

    /* ------- QCM Logic ------- */
    function startQCMPhase() {
        showScreen('screen-qcm');
        document.getElementById('section-title').innerText = "Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: QCM";
        loadQCMRound();
    }

    function loadQCMRound() {
        const data = qcmData[qcmIndex];
        const optionsDiv = document.getElementById('qcm-options');
        const feedbackEl = document.getElementById('qcm-feedback');
        const nextBtn = document.getElementById('qcm-next-btn');
        const progressBar = document.getElementById('progress');

        document.getElementById('qcm-counter').innerText = `Ø³Ø¤Ø§Ù„ ${qcmIndex + 1} / ${qcmData.length}`;
        document.getElementById('qcm-text').innerText = data.q;
        feedbackEl.innerText = "";
        nextBtn.style.display = "none";
        optionsDiv.innerHTML = "";

        let progressPercent = 50 + ((qcmIndex / qcmData.length) * 50);
        progressBar.style.width = `${progressPercent}%`;

        let options = [...data.o];
        let correctTxt = data.o[data.a];
        createButtons(optionsDiv, options, correctTxt, 'qcm');
    }

    function nextQCMStep() {
        qcmIndex++;
        if (qcmIndex < qcmData.length) {
            loadQCMRound();
        } else {
            finishExam();
        }
    }

    /* ------- Helpers ------- */
    function createButtons(container, optionsList, correctText, mode) {
        optionsList.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = function() { checkAnswer(this, opt, correctText, container, mode); };
            container.appendChild(btn);
        });
    }

    function checkAnswer(btn, selected, correct, container, mode) {
        const allBtns = container.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.disabled = true);

        const feedbackEl = document.getElementById(mode === 'game' ? 'g-feedback' : 'qcm-feedback');
        const nextBtn = document.getElementById(mode === 'game' ? 'g-next-btn' : 'qcm-next-btn');

        if (selected === correct) {
            btn.classList.add('correct');
            totalScore += 10;
            updateScore();
            feedbackEl.innerText = "âœ… ØµØ­ÙŠØ­!";
            feedbackEl.style.color = "#27ae60";
        } else {
            btn.classList.add('wrong');
            allBtns.forEach(b => {
                if (b.innerText === correct) b.classList.add('correct');
            });
            feedbackEl.innerText = "âŒ Ø®Ø·Ø£!";
            feedbackEl.style.color = "#c0392b";
        }
        nextBtn.style.display = "block";
    }

    function finishExam() {
        showScreen('screen-result');
        document.getElementById('progress').style.width = "100%";
        document.getElementById('final-score').innerText = totalScore;
        
        // Max Score Calculation
        // Game items: (8 + 6) = 14 items * 10 pts = 140
        // QCM: 30 items * 10 pts = 300
        // Total = 440
        const maxScore = 440;
        const percentage = (totalScore / maxScore) * 100;
        const msgEl = document.getElementById('final-msg');

        if (percentage >= 85) {
            msgEl.innerText = "Ø£Ù†Øª Ø®Ø¨ÙŠØ± ÙÙŠ Ø§Ù„Ø¨ÙŠØ¯Ø§ØºÙˆØ¬ÙŠØ§! ğŸ§­ğŸ“";
            msgEl.style.color = "#27ae60";
        } else if (percentage >= 50) {
            msgEl.innerText = "Ø¬ÙŠØ¯ØŒ ÙˆÙ„ÙƒÙ† Ø±Ø§Ø¬Ø¹ Ø§Ù„ÙØ±ÙˆÙ‚Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‡Ø¯Ø§Ù ÙˆØ§Ù„ÙƒÙØ§ÙŠØ§Øª ğŸ“š";
            msgEl.style.color = "#f1c40f";
        } else {
            msgEl.innerText = "Ø§Ù„Ø¨ÙˆØµÙ„Ø© ØªØ§Ø¦Ù‡Ø©ØŒ Ø£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©! ğŸ’ª";
            msgEl.style.color = "#c0392b";
        }
    }
</script>

</body>
</html>